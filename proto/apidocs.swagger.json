{
  "swagger": "2.0",
  "info": {
    "title": "Authzed",
    "version": "1.0",
    "contact": {
      "name": "Authzed, Inc.",
      "url": "https://github.com/authzed/api",
      "email": "support@authzed.com"
    },
    "license": {
      "name": "Apache 2.0 License",
      "url": "https://github.com/authzed/api/blob/main/LICENSE"
    }
  },
  "tags": [
    {
      "name": "DeveloperService"
    },
    {
      "name": "PermissionsService"
    },
    {
      "name": "SchemaService"
    },
    {
      "name": "WatchService"
    },
    {
      "name": "SchemaService"
    },
    {
      "name": "WatchResourcesService"
    }
  ],
  "schemes": [
    "http",
    "https",
    "wss"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/permissions/check": {
      "post": {
        "summary": "CheckPermission determines for a given resource whether a subject computes\nto having a permission or is a direct member of a particular relation.",
        "operationId": "PermissionsService_CheckPermission",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1CheckPermissionResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "CheckPermissionRequest issues a check on whether a subject has a permission\nor is a member of a relation, on a specific resource.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1CheckPermissionRequest"
            }
          }
        ],
        "tags": [
          "PermissionsService"
        ]
      }
    },
    "/v1/permissions/expand": {
      "post": {
        "summary": "ExpandPermissionTree reveals the graph structure for a resource's\npermission or relation. This RPC does not recurse infinitely deep and may\nrequire multiple calls to fully unnest a deeply nested graph.",
        "operationId": "PermissionsService_ExpandPermissionTree",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ExpandPermissionTreeResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "ExpandPermissionTreeRequest returns a tree representing the expansion of all\nrelationships found accessible from a permission or relation on a particular\nresource.\n\nExpandPermissionTreeRequest is typically used to determine the full set of\nsubjects with a permission, along with the relationships that grant said\naccess.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ExpandPermissionTreeRequest"
            }
          }
        ],
        "tags": [
          "PermissionsService"
        ]
      }
    },
    "/v1/permissions/resources": {
      "post": {
        "summary": "LookupResources returns all the resources of a given type that a subject\ncan access whether via a computed permission or relation membership.",
        "operationId": "PermissionsService_LookupResources",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/v1LookupResourcesResponse"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of v1LookupResourcesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "LookupResourcesRequest performs a lookup of all resources of a particular\nkind on which the subject has the specified permission or the relation in\nwhich the subject exists, streaming back the IDs of those resources.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1LookupResourcesRequest"
            }
          }
        ],
        "tags": [
          "PermissionsService"
        ]
      }
    },
    "/v1/permissions/subjects": {
      "post": {
        "summary": "LookupSubjects returns all the subjects of a given type that\nhave access whether via a computed permission or relation membership.",
        "operationId": "PermissionsService_LookupSubjects",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/v1LookupSubjectsResponse"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of v1LookupSubjectsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "LookupSubjectsRequest performs a lookup of all subjects of a particular\nkind for which the subject has the specified permission or the relation in\nwhich the subject exists, streaming back the IDs of those subjects.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1LookupSubjectsRequest"
            }
          }
        ],
        "tags": [
          "PermissionsService"
        ]
      }
    },
    "/v1/relationships/delete": {
      "post": {
        "summary": "DeleteRelationships atomically bulk deletes all relationships matching the\nprovided filter. If no relationships match, none will be deleted and the\noperation will succeed. An optional set of preconditions can be provided that must\nbe satisfied for the operation to commit.",
        "operationId": "PermissionsService_DeleteRelationships",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1DeleteRelationshipsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "DeleteRelationshipsRequest specifies which Relationships should be deleted,\nrequesting the delete of *ALL* relationships that match the specified\nfilters. If the optional_preconditions parameter is included, all of the\nspecified preconditions must also be satisfied before the delete will be\nexecuted.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1DeleteRelationshipsRequest"
            }
          }
        ],
        "tags": [
          "PermissionsService"
        ]
      }
    },
    "/v1/relationships/read": {
      "post": {
        "summary": "ReadRelationships reads a set of the relationships matching one or more\nfilters.",
        "operationId": "PermissionsService_ReadRelationships",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/v1ReadRelationshipsResponse"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of v1ReadRelationshipsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "ReadRelationshipsRequest specifies one or more filters used to read matching\nrelationships within the system.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ReadRelationshipsRequest"
            }
          }
        ],
        "tags": [
          "PermissionsService"
        ]
      }
    },
    "/v1/relationships/write": {
      "post": {
        "summary": "WriteRelationships atomically writes and/or deletes a set of specified\nrelationships. An optional set of preconditions can be provided that must\nbe satisfied for the operation to commit.",
        "operationId": "PermissionsService_WriteRelationships",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1WriteRelationshipsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "WriteRelationshipsRequest contains a list of Relationship mutations that\nshould be applied to the service. If the optional_preconditions parameter\nis included, all of the specified preconditions must also be satisfied before\nthe write will be committed.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1WriteRelationshipsRequest"
            }
          }
        ],
        "tags": [
          "PermissionsService"
        ]
      }
    },
    "/v1/schema/read": {
      "post": {
        "summary": "Read returns the current Object Definitions for a Permissions System.",
        "description": "Errors include:\n- INVALID_ARGUMENT: a provided value has failed to semantically validate\n- NOT_FOUND: no schema has been defined",
        "operationId": "SchemaService_ReadSchema",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/apiv1ReadSchemaResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "ReadSchemaRequest returns the schema from the database.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/apiv1ReadSchemaRequest"
            }
          }
        ],
        "tags": [
          "SchemaService"
        ]
      }
    },
    "/v1/schema/write": {
      "post": {
        "summary": "Write overwrites the current Object Definitions for a Permissions System.",
        "operationId": "SchemaService_WriteSchema",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/apiv1WriteSchemaResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "WriteSchemaRequest is the required data used to \"upsert\" the Schema of a\nPermissions System.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/apiv1WriteSchemaRequest"
            }
          }
        ],
        "tags": [
          "SchemaService"
        ]
      }
    },
    "/v1/watch": {
      "post": {
        "operationId": "WatchService_Watch",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/v1WatchResponse"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of v1WatchResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "WatchRequest specifies the object definitions for which we want to start\nwatching mutations, and an optional start snapshot for when to start\nwatching.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1WatchRequest"
            }
          }
        ],
        "tags": [
          "WatchService"
        ]
      }
    },
    "/v1alpha1/lookupwatch": {
      "post": {
        "summary": "WatchResources initiates a watch for permission changes for the provided\n(resource type, permission, subject) pair.",
        "operationId": "WatchResourcesService_WatchResources",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/v1alpha1WatchResourcesResponse"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of v1alpha1WatchResourcesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "WatchResourcesRequest starts a watch for specific permission updates\nfor the given resource and subject types.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1alpha1WatchResourcesRequest"
            }
          }
        ],
        "tags": [
          "WatchResourcesService"
        ]
      }
    }
  },
  "definitions": {
    "DeveloperErrorErrorKind": {
      "type": "string",
      "enum": [
        "UNKNOWN_KIND",
        "PARSE_ERROR",
        "SCHEMA_ISSUE",
        "DUPLICATE_RELATIONSHIP",
        "MISSING_EXPECTED_RELATIONSHIP",
        "EXTRA_RELATIONSHIP_FOUND",
        "UNKNOWN_OBJECT_TYPE",
        "UNKNOWN_RELATION",
        "MAXIMUM_RECURSION",
        "ASSERTION_FAILED"
      ],
      "default": "UNKNOWN_KIND"
    },
    "DeveloperErrorSource": {
      "type": "string",
      "enum": [
        "UNKNOWN_SOURCE",
        "SCHEMA",
        "RELATIONSHIP",
        "VALIDATION_YAML",
        "CHECK_WATCH",
        "ASSERTION"
      ],
      "default": "UNKNOWN_SOURCE"
    },
    "LookupShareResponseLookupStatus": {
      "type": "string",
      "enum": [
        "UNKNOWN_REFERENCE",
        "FAILED_TO_LOOKUP",
        "VALID_REFERENCE",
        "UPGRADED_REFERENCE"
      ],
      "default": "UNKNOWN_REFERENCE"
    },
    "SubjectFilterRelationFilter": {
      "type": "object",
      "properties": {
        "relation": {
          "type": "string"
        }
      }
    },
    "apiv1ReadSchemaRequest": {
      "type": "object",
      "description": "ReadSchemaRequest returns the schema from the database."
    },
    "apiv1ReadSchemaResponse": {
      "type": "object",
      "properties": {
        "schemaText": {
          "type": "string",
          "title": "schema_text is the textual form of the current schema in the system"
        }
      },
      "description": "ReadSchemaResponse is the resulting data after having read the Object\nDefinitions from a Schema."
    },
    "apiv1WriteSchemaRequest": {
      "type": "object",
      "properties": {
        "schema": {
          "type": "string",
          "description": "The Schema containing one or more Object Definitions that will be written\nto the Permissions System."
        }
      },
      "description": "WriteSchemaRequest is the required data used to \"upsert\" the Schema of a\nPermissions System."
    },
    "apiv1WriteSchemaResponse": {
      "type": "object",
      "description": "WriteSchemaResponse is the resulting data after having written a Schema to\na Permissions System."
    },
    "apiv1alpha1ReadSchemaResponse": {
      "type": "object",
      "properties": {
        "objectDefinitions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The Object Definitions that were requested."
        },
        "computedDefinitionsRevision": {
          "type": "string",
          "description": "The computed revision of the returned object definitions."
        }
      },
      "description": "ReadSchemaResponse is the resulting data after having read the Object\nDefinitions from a Schema."
    },
    "apiv1alpha1WriteSchemaResponse": {
      "type": "object",
      "properties": {
        "objectDefinitionsNames": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The names of the Object Definitions that were written."
        },
        "computedDefinitionsRevision": {
          "type": "string",
          "description": "The computed revision of the written object definitions."
        }
      },
      "description": "WriteSchemaResponse is the resulting data after having written a Schema to\na Permissions System."
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "protobufNullValue": {
      "type": "string",
      "enum": [
        "NULL_VALUE"
      ],
      "default": "NULL_VALUE",
      "description": "`NullValue` is a singleton enumeration to represent the null value for the\n`Value` type union.\n\n The JSON representation for `NullValue` is JSON `null`.\n\n - NULL_VALUE: Null value."
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v0DeveloperError": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        },
        "line": {
          "type": "integer",
          "format": "int64"
        },
        "column": {
          "type": "integer",
          "format": "int64"
        },
        "source": {
          "$ref": "#/definitions/DeveloperErrorSource"
        },
        "kind": {
          "$ref": "#/definitions/DeveloperErrorErrorKind"
        },
        "path": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "context": {
          "type": "string",
          "description": "context holds the context for the error. For schema issues, this will be the\nname of the object type. For relationship issues, the full relationship string."
        }
      }
    },
    "v0EditCheckResponse": {
      "type": "object",
      "properties": {
        "requestErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v0DeveloperError"
          }
        },
        "checkResults": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v0EditCheckResult"
          }
        }
      }
    },
    "v0EditCheckResult": {
      "type": "object",
      "properties": {
        "relationship": {
          "$ref": "#/definitions/v0RelationTuple"
        },
        "isMember": {
          "type": "boolean"
        },
        "error": {
          "$ref": "#/definitions/v0DeveloperError"
        }
      }
    },
    "v0FormatSchemaResponse": {
      "type": "object",
      "properties": {
        "error": {
          "$ref": "#/definitions/v0DeveloperError"
        },
        "formattedSchema": {
          "type": "string"
        }
      }
    },
    "v0LookupShareResponse": {
      "type": "object",
      "properties": {
        "status": {
          "$ref": "#/definitions/LookupShareResponseLookupStatus"
        },
        "schema": {
          "type": "string"
        },
        "relationshipsYaml": {
          "type": "string"
        },
        "validationYaml": {
          "type": "string"
        },
        "assertionsYaml": {
          "type": "string"
        }
      }
    },
    "v0ObjectAndRelation": {
      "type": "object",
      "properties": {
        "namespace": {
          "type": "string"
        },
        "objectId": {
          "type": "string"
        },
        "relation": {
          "type": "string"
        }
      }
    },
    "v0RelationTuple": {
      "type": "object",
      "properties": {
        "objectAndRelation": {
          "$ref": "#/definitions/v0ObjectAndRelation",
          "description": "Each tupleset specifies keys of a set of relation tuples. The set can\ninclude a single tuple key, or all tuples with a given object ID or\nuserset in a namespace, optionally constrained by a relation name.\n\nexamples:\ndoc:readme#viewer@group:eng#member (fully specified)\ndoc:*#*#group:eng#member (all tuples that this userset relates to)\ndoc:12345#*#* (all tuples with a direct relationship to a document)\ndoc:12345#writer#* (all tuples with direct write relationship with the\ndocument) doc:#writer#group:eng#member (all tuples that eng group has write\nrelationship)"
        },
        "user": {
          "$ref": "#/definitions/v0User"
        }
      }
    },
    "v0RequestContext": {
      "type": "object",
      "properties": {
        "schema": {
          "type": "string"
        },
        "relationships": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v0RelationTuple"
          }
        }
      }
    },
    "v0ShareResponse": {
      "type": "object",
      "properties": {
        "shareReference": {
          "type": "string"
        }
      }
    },
    "v0UpgradeSchemaResponse": {
      "type": "object",
      "properties": {
        "error": {
          "$ref": "#/definitions/v0DeveloperError"
        },
        "upgradedSchema": {
          "type": "string"
        }
      }
    },
    "v0User": {
      "type": "object",
      "properties": {
        "userset": {
          "$ref": "#/definitions/v0ObjectAndRelation"
        }
      }
    },
    "v0ValidateResponse": {
      "type": "object",
      "properties": {
        "requestErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v0DeveloperError"
          }
        },
        "validationErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v0DeveloperError"
          }
        },
        "updatedValidationYaml": {
          "type": "string"
        }
      }
    },
    "v1AlgebraicSubjectSet": {
      "type": "object",
      "properties": {
        "operation": {
          "$ref": "#/definitions/v1AlgebraicSubjectSetOperation"
        },
        "children": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1PermissionRelationshipTree"
          }
        }
      },
      "description": "AlgebraicSubjectSet is a subject set which is computed based on applying the\nspecified operation to the operands according to the algebra of sets.\n\nUNION is a logical set containing the subject members from all operands.\n\nINTERSECTION is a logical set containing only the subject members which are\npresent in all operands.\n\nEXCLUSION is a logical set containing only the subject members which are\npresent in the first operand, and none of the other operands."
    },
    "v1AlgebraicSubjectSetOperation": {
      "type": "string",
      "enum": [
        "OPERATION_UNSPECIFIED",
        "OPERATION_UNION",
        "OPERATION_INTERSECTION",
        "OPERATION_EXCLUSION"
      ],
      "default": "OPERATION_UNSPECIFIED"
    },
    "v1CheckPermissionRequest": {
      "type": "object",
      "properties": {
        "consistency": {
          "$ref": "#/definitions/v1Consistency"
        },
        "resource": {
          "$ref": "#/definitions/v1ObjectReference",
          "description": "resource is the resource on which to check the permission or relation."
        },
        "permission": {
          "type": "string",
          "description": "permission is the name of the permission (or relation) on which to execute\nthe check."
        },
        "subject": {
          "$ref": "#/definitions/v1SubjectReference",
          "description": "subject is the subject that will be checked for the permission or relation."
        },
        "context": {
          "type": "object",
          "title": "context consists of named values that are injected into the caveat evaluation context *"
        }
      },
      "description": "CheckPermissionRequest issues a check on whether a subject has a permission\nor is a member of a relation, on a specific resource."
    },
    "v1CheckPermissionResponse": {
      "type": "object",
      "properties": {
        "checkedAt": {
          "$ref": "#/definitions/v1ZedToken"
        },
        "permissionship": {
          "$ref": "#/definitions/v1CheckPermissionResponsePermissionship",
          "description": "Permissionship communicates whether or not the subject has the requested\npermission or has a relationship with the given resource, over the given\nrelation.\n\nThis value will be authzed.api.v1.PERMISSIONSHIP_HAS_PERMISSION if the\nrequested subject is a member of the computed permission set or there\nexists a relationship with the requested relation from the given resource\nto the given subject."
        },
        "partialCaveatInfo": {
          "$ref": "#/definitions/v1PartialCaveatInfo",
          "title": "partial_caveat_info holds information of a partially-evaluated caveated response"
        }
      }
    },
    "v1CheckPermissionResponsePermissionship": {
      "type": "string",
      "enum": [
        "PERMISSIONSHIP_UNSPECIFIED",
        "PERMISSIONSHIP_NO_PERMISSION",
        "PERMISSIONSHIP_HAS_PERMISSION",
        "PERMISSIONSHIP_CONDITIONAL_PERMISSION"
      ],
      "default": "PERMISSIONSHIP_UNSPECIFIED"
    },
    "v1Consistency": {
      "type": "object",
      "properties": {
        "minimizeLatency": {
          "type": "boolean",
          "description": "minimize_latency indicates that the latency for the call should be\nminimized by having the system select the fastest snapshot available."
        },
        "atLeastAsFresh": {
          "$ref": "#/definitions/v1ZedToken",
          "description": "at_least_as_fresh indicates that all data used in the API call must be\n*at least as fresh* as that found in the ZedToken; more recent data might\nbe used if available or faster."
        },
        "atExactSnapshot": {
          "$ref": "#/definitions/v1ZedToken",
          "description": "at_exact_snapshot indicates that all data used in the API call must be\n*at the given* snapshot in time; if the snapshot is no longer available,\nan error will be returned to the caller."
        },
        "fullyConsistent": {
          "type": "boolean",
          "description": "fully_consistent indicates that all data used in the API call *must* be\nat the most recent snapshot found.\n\nNOTE: using this method can be *quite slow*, so unless there is a need to\ndo so, it is recommended to use `at_least_as_fresh` with a stored\nZedToken."
        }
      },
      "description": "Consistency will define how a request is handled by the backend.\nBy defining a consistency requirement, and a token at which those\nrequirements should be applied, where applicable."
    },
    "v1ContextualizedCaveat": {
      "type": "object",
      "properties": {
        "caveatName": {
          "type": "string",
          "title": "caveat_name is the name of the caveat expression to use, as defined in the schema *"
        },
        "context": {
          "type": "object",
          "title": "context consists of any named values that are defined at write time for the caveat expression *"
        }
      },
      "description": "ContextualizedCaveat represents a reference to a caveat to be used by caveated relationships.\nThe context consists of key-value pairs that will be injected at evaluation time.\nThe keys must match the arguments defined on the caveat in the schema."
    },
    "v1DeleteRelationshipsRequest": {
      "type": "object",
      "properties": {
        "relationshipFilter": {
          "$ref": "#/definitions/v1RelationshipFilter"
        },
        "optionalPreconditions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1Precondition"
          }
        }
      },
      "description": "DeleteRelationshipsRequest specifies which Relationships should be deleted,\nrequesting the delete of *ALL* relationships that match the specified\nfilters. If the optional_preconditions parameter is included, all of the\nspecified preconditions must also be satisfied before the delete will be\nexecuted."
    },
    "v1DeleteRelationshipsResponse": {
      "type": "object",
      "properties": {
        "deletedAt": {
          "$ref": "#/definitions/v1ZedToken"
        }
      }
    },
    "v1DirectSubjectSet": {
      "type": "object",
      "properties": {
        "subjects": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1SubjectReference"
          }
        }
      },
      "description": "DirectSubjectSet is a subject set which is simply a collection of subjects."
    },
    "v1ExpandPermissionTreeRequest": {
      "type": "object",
      "properties": {
        "consistency": {
          "$ref": "#/definitions/v1Consistency"
        },
        "resource": {
          "$ref": "#/definitions/v1ObjectReference",
          "description": "resource is the resource over which to run the expansion."
        },
        "permission": {
          "type": "string",
          "description": "permission is the name of the permission or relation over which to run the\nexpansion for the resource."
        }
      },
      "description": "ExpandPermissionTreeRequest returns a tree representing the expansion of all\nrelationships found accessible from a permission or relation on a particular\nresource.\n\nExpandPermissionTreeRequest is typically used to determine the full set of\nsubjects with a permission, along with the relationships that grant said\naccess."
    },
    "v1ExpandPermissionTreeResponse": {
      "type": "object",
      "properties": {
        "expandedAt": {
          "$ref": "#/definitions/v1ZedToken"
        },
        "treeRoot": {
          "$ref": "#/definitions/v1PermissionRelationshipTree",
          "description": "tree_root is a tree structure whose leaf nodes are subjects, and\nintermediate nodes represent the various operations (union, intersection,\nexclusion) to reach those subjects."
        }
      }
    },
    "v1LookupPermissionship": {
      "type": "string",
      "enum": [
        "LOOKUP_PERMISSIONSHIP_UNSPECIFIED",
        "LOOKUP_PERMISSIONSHIP_HAS_PERMISSION",
        "LOOKUP_PERMISSIONSHIP_CONDITIONAL_PERMISSION"
      ],
      "default": "LOOKUP_PERMISSIONSHIP_UNSPECIFIED",
      "title": "LookupPermissionship represents whether a Lookup response was partially evaluated or not"
    },
    "v1LookupResourcesRequest": {
      "type": "object",
      "properties": {
        "consistency": {
          "$ref": "#/definitions/v1Consistency"
        },
        "resourceObjectType": {
          "type": "string",
          "description": "resource_object_type is the type of resource object for which the IDs will\nbe returned."
        },
        "permission": {
          "type": "string",
          "description": "permission is the name of the permission or relation for which the subject\nmust Check."
        },
        "subject": {
          "$ref": "#/definitions/v1SubjectReference",
          "description": "subject is the subject with access to the resources."
        },
        "context": {
          "type": "object",
          "title": "context consists of named values that are injected into the caveat evaluation context *"
        }
      },
      "description": "LookupResourcesRequest performs a lookup of all resources of a particular\nkind on which the subject has the specified permission or the relation in\nwhich the subject exists, streaming back the IDs of those resources."
    },
    "v1LookupResourcesResponse": {
      "type": "object",
      "properties": {
        "lookedUpAt": {
          "$ref": "#/definitions/v1ZedToken"
        },
        "resourceObjectId": {
          "type": "string"
        },
        "permissionship": {
          "$ref": "#/definitions/v1LookupPermissionship",
          "title": "permissionship indicates whether the response was partially evaluated or not"
        },
        "partialCaveatInfo": {
          "$ref": "#/definitions/v1PartialCaveatInfo",
          "title": "partial_caveat_info holds information of a partially-evaluated caveated response"
        }
      },
      "description": "LookupResourcesResponse contains a single matching resource object ID for the\nrequested object type, permission, and subject."
    },
    "v1LookupSubjectsRequest": {
      "type": "object",
      "properties": {
        "consistency": {
          "$ref": "#/definitions/v1Consistency"
        },
        "resource": {
          "$ref": "#/definitions/v1ObjectReference",
          "description": "resource is the resource for which all matching subjects for the permission\nor relation will be returned."
        },
        "permission": {
          "type": "string",
          "description": "permission is the name of the permission (or relation) for which to find\nthe subjects."
        },
        "subjectObjectType": {
          "type": "string",
          "description": "subject_object_type is the type of subject object for which the IDs will\nbe returned."
        },
        "optionalSubjectRelation": {
          "type": "string",
          "description": "optional_subject_relation is the optional relation for the subject."
        },
        "context": {
          "type": "object",
          "title": "context consists of named values that are injected into the caveat evaluation context *"
        }
      },
      "description": "LookupSubjectsRequest performs a lookup of all subjects of a particular\nkind for which the subject has the specified permission or the relation in\nwhich the subject exists, streaming back the IDs of those subjects."
    },
    "v1LookupSubjectsResponse": {
      "type": "object",
      "properties": {
        "lookedUpAt": {
          "$ref": "#/definitions/v1ZedToken"
        },
        "subjectObjectId": {
          "type": "string",
          "title": "subject_object_id is the Object ID of the subject found. May be a `*` if\na wildcard was found.\ndeprecated: use `subject`"
        },
        "excludedSubjectIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "excluded_subject_ids are the Object IDs of the subjects excluded. This list\nwill only contain object IDs if `subject_object_id` is a wildcard (`*`) and\nwill only be populated if exclusions exist from the wildcard.\ndeprecated: use `excluded_subjects`"
        },
        "permissionship": {
          "$ref": "#/definitions/v1LookupPermissionship",
          "title": "permissionship indicates whether the response was partially evaluated or not\ndeprecated: use `subject.permissionship`"
        },
        "partialCaveatInfo": {
          "$ref": "#/definitions/v1PartialCaveatInfo",
          "title": "partial_caveat_info holds information of a partially-evaluated caveated response\ndeprecated: use `subject.partial_caveat_info`"
        },
        "subject": {
          "$ref": "#/definitions/v1ResolvedSubject",
          "description": "subject is the subject found, along with its permissionship."
        },
        "excludedSubjects": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1ResolvedSubject"
          },
          "description": "excluded_subjects are the subjects excluded. This list\nwill only contain subjects if `subject.subject_object_id` is a wildcard (`*`) and\nwill only be populated if exclusions exist from the wildcard."
        }
      },
      "description": "LookupSubjectsResponse contains a single matching subject object ID for the\nrequested subject object type on the permission or relation."
    },
    "v1ObjectReference": {
      "type": "object",
      "properties": {
        "objectType": {
          "type": "string"
        },
        "objectId": {
          "type": "string"
        }
      },
      "description": "ObjectReference is used to refer to a specific object in the system."
    },
    "v1PartialCaveatInfo": {
      "type": "object",
      "properties": {
        "missingRequiredContext": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "missing_required_context is a list of one or more fields that were missing and prevented caveats\nfrom being fully evaluated"
        }
      },
      "title": "PartialCaveatInfo carries information necessary for the client to take action\nin the event a response contains a partially evaluated caveat"
    },
    "v1PermissionRelationshipTree": {
      "type": "object",
      "properties": {
        "intermediate": {
          "$ref": "#/definitions/v1AlgebraicSubjectSet"
        },
        "leaf": {
          "$ref": "#/definitions/v1DirectSubjectSet"
        },
        "expandedObject": {
          "$ref": "#/definitions/v1ObjectReference"
        },
        "expandedRelation": {
          "type": "string"
        }
      },
      "description": "PermissionRelationshipTree is used for representing a tree of a resource and\nits permission relationships with other objects."
    },
    "v1Precondition": {
      "type": "object",
      "properties": {
        "operation": {
          "$ref": "#/definitions/v1PreconditionOperation"
        },
        "filter": {
          "$ref": "#/definitions/v1RelationshipFilter"
        }
      },
      "description": "Precondition specifies how and the existence or absence of certain\nrelationships as expressed through the accompanying filter should affect\nwhether or not the operation proceeds.\n\nMUST_NOT_MATCH will fail the parent request if any relationships match the\nrelationships filter.\nMUST_MATCH will fail the parent request if there are no\nrelationships that match the filter."
    },
    "v1PreconditionOperation": {
      "type": "string",
      "enum": [
        "OPERATION_UNSPECIFIED",
        "OPERATION_MUST_NOT_MATCH",
        "OPERATION_MUST_MATCH"
      ],
      "default": "OPERATION_UNSPECIFIED"
    },
    "v1ReadRelationshipsRequest": {
      "type": "object",
      "properties": {
        "consistency": {
          "$ref": "#/definitions/v1Consistency"
        },
        "relationshipFilter": {
          "$ref": "#/definitions/v1RelationshipFilter"
        }
      },
      "description": "ReadRelationshipsRequest specifies one or more filters used to read matching\nrelationships within the system."
    },
    "v1ReadRelationshipsResponse": {
      "type": "object",
      "properties": {
        "readAt": {
          "$ref": "#/definitions/v1ZedToken"
        },
        "relationship": {
          "$ref": "#/definitions/v1Relationship"
        }
      },
      "description": "ReadRelationshipsResponse contains a Relationship found that matches the\nspecified relationship filter(s). A instance of this response message will\nbe streamed to the client for each relationship found."
    },
    "v1Relationship": {
      "type": "object",
      "properties": {
        "resource": {
          "$ref": "#/definitions/v1ObjectReference",
          "title": "resource is the resource to which the subject is related, in some manner"
        },
        "relation": {
          "type": "string",
          "description": "relation is how the resource and subject are related."
        },
        "subject": {
          "$ref": "#/definitions/v1SubjectReference",
          "description": "subject is the subject to which the resource is related, in some manner."
        },
        "optionalCaveat": {
          "$ref": "#/definitions/v1ContextualizedCaveat",
          "title": "optional_caveat is a reference to a the caveat that must be enforced over the relationship"
        }
      },
      "description": "Relationship specifies how a resource relates to a subject. Relationships\nform the data for the graph over which all permissions questions are\nanswered."
    },
    "v1RelationshipFilter": {
      "type": "object",
      "properties": {
        "resourceType": {
          "type": "string"
        },
        "optionalResourceId": {
          "type": "string"
        },
        "optionalRelation": {
          "type": "string"
        },
        "optionalSubjectFilter": {
          "$ref": "#/definitions/v1SubjectFilter"
        }
      },
      "description": "RelationshipFilter is a collection of filters which when applied to a\nrelationship will return relationships that have exactly matching fields.\n\nresource_type is required. All other fields are optional and if left\nunspecified will not filter relationships."
    },
    "v1RelationshipUpdate": {
      "type": "object",
      "properties": {
        "operation": {
          "$ref": "#/definitions/v1RelationshipUpdateOperation"
        },
        "relationship": {
          "$ref": "#/definitions/v1Relationship"
        }
      },
      "description": "RelationshipUpdate is used for mutating a single relationship within the\nservice.\n\nCREATE will create the relationship only if it doesn't exist, and error\notherwise.\n\nTOUCH will upsert the relationship, and will not error if it\nalready exists.\n\nDELETE will delete the relationship. If the relationship does not exist,\nthis operation will no-op."
    },
    "v1RelationshipUpdateOperation": {
      "type": "string",
      "enum": [
        "OPERATION_UNSPECIFIED",
        "OPERATION_CREATE",
        "OPERATION_TOUCH",
        "OPERATION_DELETE"
      ],
      "default": "OPERATION_UNSPECIFIED"
    },
    "v1ResolvedSubject": {
      "type": "object",
      "properties": {
        "subjectObjectId": {
          "type": "string",
          "description": "subject_object_id is the Object ID of the subject found. May be a `*` if\na wildcard was found."
        },
        "permissionship": {
          "$ref": "#/definitions/v1LookupPermissionship",
          "title": "permissionship indicates whether the response was partially evaluated or not"
        },
        "partialCaveatInfo": {
          "$ref": "#/definitions/v1PartialCaveatInfo",
          "title": "partial_caveat_info holds information of a partially-evaluated caveated response"
        }
      },
      "description": "ResolvedSubject is a single subject resolved within LookupSubjects."
    },
    "v1SubjectFilter": {
      "type": "object",
      "properties": {
        "subjectType": {
          "type": "string"
        },
        "optionalSubjectId": {
          "type": "string"
        },
        "optionalRelation": {
          "$ref": "#/definitions/SubjectFilterRelationFilter"
        }
      },
      "description": "SubjectFilter specifies a filter on the subject of a relationship.\n\nsubject_type is required and all other fields are optional, and will not\nimpose any additional requirements if left unspecified."
    },
    "v1SubjectReference": {
      "type": "object",
      "properties": {
        "object": {
          "$ref": "#/definitions/v1ObjectReference"
        },
        "optionalRelation": {
          "type": "string"
        }
      },
      "title": "SubjectReference is used for referring to the subject portion of a\nRelationship. The relation component is optional and is used for defining a\nsub-relation on the subject, e.g. group:123#members"
    },
    "v1WatchRequest": {
      "type": "object",
      "properties": {
        "optionalObjectTypes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "optionalStartCursor": {
          "$ref": "#/definitions/v1ZedToken"
        }
      },
      "description": "WatchRequest specifies the object definitions for which we want to start\nwatching mutations, and an optional start snapshot for when to start\nwatching."
    },
    "v1WatchResponse": {
      "type": "object",
      "properties": {
        "updates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1RelationshipUpdate"
          }
        },
        "changesThrough": {
          "$ref": "#/definitions/v1ZedToken"
        }
      },
      "description": "WatchResponse contains all tuple modification events in ascending\ntimestamp order, from the requested start snapshot to a snapshot\nencoded in the watch response. The client can use the snapshot to resume\nwatching where the previous watch response left off."
    },
    "v1WriteRelationshipsRequest": {
      "type": "object",
      "properties": {
        "updates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1RelationshipUpdate"
          }
        },
        "optionalPreconditions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1Precondition"
          }
        }
      },
      "description": "WriteRelationshipsRequest contains a list of Relationship mutations that\nshould be applied to the service. If the optional_preconditions parameter\nis included, all of the specified preconditions must also be satisfied before\nthe write will be committed."
    },
    "v1WriteRelationshipsResponse": {
      "type": "object",
      "properties": {
        "writtenAt": {
          "$ref": "#/definitions/v1ZedToken"
        }
      }
    },
    "v1ZedToken": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        }
      },
      "description": "ZedToken is used to provide causality metadata between Write and Check\nrequests.\n\nSee the authzed.api.v1.Consistency message for more information."
    },
    "v1alpha1PermissionUpdate": {
      "type": "object",
      "properties": {
        "subject": {
          "$ref": "#/definitions/v1SubjectReference",
          "description": "subject defines the subject resource whose permissions have changed."
        },
        "resource": {
          "$ref": "#/definitions/v1ObjectReference",
          "description": "resource defines the specific object in the system."
        },
        "relation": {
          "type": "string"
        },
        "updatedPermission": {
          "$ref": "#/definitions/v1alpha1PermissionUpdatePermissionship"
        }
      },
      "description": "PermissionUpdate represents a single permission update for a specific\nsubject's permissions."
    },
    "v1alpha1PermissionUpdatePermissionship": {
      "type": "string",
      "enum": [
        "PERMISSIONSHIP_UNSPECIFIED",
        "PERMISSIONSHIP_NO_PERMISSION",
        "PERMISSIONSHIP_HAS_PERMISSION"
      ],
      "default": "PERMISSIONSHIP_UNSPECIFIED",
      "description": "todo: work this into the v1 core API at some point since it's used\nacross services."
    },
    "v1alpha1WatchResourcesRequest": {
      "type": "object",
      "properties": {
        "resourceObjectType": {
          "type": "string",
          "description": "resource_object_type is the type of resource object for which we will\nwatch for changes."
        },
        "permission": {
          "type": "string",
          "description": "permission is the name of the permission or relation for which we will\nwatch for changes."
        },
        "subjectObjectType": {
          "type": "string",
          "description": "subject_object_type is the type of the subject resource for which we will\nwatch for changes."
        },
        "optionalSubjectRelation": {
          "type": "string",
          "description": "optional_subject_relation allows you to specify a group of subjects to watch\nfor a given subject type."
        },
        "optionalStartCursor": {
          "$ref": "#/definitions/v1ZedToken"
        }
      },
      "description": "WatchResourcesRequest starts a watch for specific permission updates\nfor the given resource and subject types."
    },
    "v1alpha1WatchResourcesResponse": {
      "type": "object",
      "properties": {
        "updates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1alpha1PermissionUpdate"
          }
        },
        "changesThrough": {
          "$ref": "#/definitions/v1ZedToken"
        }
      },
      "description": "WatchResourcesResponse enumerates the list of permission updates that have\noccurred as a result of one or more relationship updates."
    }
  },
  "securityDefinitions": {
    "ApiKeyAuth": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  },
  "externalDocs": {
    "description": "More about the Authzed API.",
    "url": "https://docs.authzed.com/reference/api"
  }
}
